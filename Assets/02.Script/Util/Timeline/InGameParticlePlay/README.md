# InGameParticlePlay - 파티클 재생 클립

Unity Timeline에서 파티클 시스템을 제어하는 커스텀 클립입니다.

## 📁 파일 구조

```
InGameParticlePlay/
├── IngameParticlePlayBehaviour.cs      # 파티클 재생 로직
├── IngameParticlePlayClip.cs           # Timeline 클립 에셋
├── IngameParticlePlayTrack.cs          # Timeline 트랙
├── IngameParticlePlayMixerBehaviour.cs # 믹서 동작
└── README.md                           # 사용법 설명
```

## 🎮 사용법

### 1. Timeline에 트랙 추가
1. Timeline 창에서 `+` 버튼 클릭
2. `파티클재생트랙` 선택하여 추가

### 2. 클립 생성 및 설정
1. 트랙에서 우클릭 → `파티클재생클립` 추가
2. Inspector에서 파티클 시스템 할당
3. 재생 모드 및 설정 구성

## ⚙️ 설정 옵션

### 기본 설정
- **파티클 시스템**: 재생할 ParticleSystem 컴포넌트
- **파티클 Transform**: 애니메이션 감지용 Transform (선택사항)
- **재생 모드**: 재생 타이밍 설정

### 재생 모드
- **PlayOnStart**: 클립 시작 시 즉시 재생
- **PlayOnAnimationStart**: 애니메이션 시작 감지 시 재생
- **PlayOnCustomTime**: 지정된 시간에 재생

### 재생 설정
- **자동 정지**: 재생 시간 후 자동 정지 여부
- **재생 시간**: 파티클 재생 지속 시간 (자동 정지용)
- **지연 시간**: PlayOnCustomTime 모드에서 재생까지 대기 시간
- **루프**: 반복 재생 여부
- **한 번만 재생**: 클립 재시작 시 재생 방지

### 위치/스케일/회전 설정
- **커스텀 위치 사용**: 파티클 위치 변경
- **커스텀 스케일 사용**: 파티클 크기 변경
- **커스텀 회전 사용**: 파티클 회전 변경

### 애니메이션 감지
- **애니메이션 시작 감지**: 특정 애니메이션 시작 시 파티클 재생
- **대상 애니메이션 클립**: 감지할 애니메이션 클립 이름 배열

## 💡 사용 예시

### 1. 캐릭터 공격 시 파티클 효과
```
재생 모드: PlayOnAnimationStart
대상 애니메이션: ["Attack", "Skill"]
자동 정지: true
재생 시간: 2.0f
```

### 2. 특정 위치에서 파티클 재생
```
재생 모드: PlayOnStart
커스텀 위치 사용: true
위치: (0, 1, 0)
루프: false
```

### 3. 지속적인 파티클 효과
```
재생 모드: PlayOnStart
루프: true
자동 정지: false
```

### 4. 지연 후 파티클 재생
```
재생 모드: PlayOnCustomTime
지연 시간: 2.0f
자동 정지: true
재생 시간: 3.0f
```

## 🔧 고급 설정

### ExposedReference vs 직접 참조
- **ExposedReference**: Timeline에서 권장되는 방식
- **직접 참조**: 간단한 설정용
- **Vector3 백업**: 기본값 제공

### 에디터 모드 설정
- **원래 설정 복원**: 런타임에서 원래 설정으로 복원
- **에디터에서 원래 설정 복원**: 에디터에서도 복원 여부

## 🐛 문제 해결

### 파티클이 재생되지 않는 경우
1. ParticleSystem이 할당되었는지 확인
2. 재생 모드가 올바르게 설정되었는지 확인
3. 애니메이션 감지 시 대상 클립 이름 확인

### 위치가 변경되지 않는 경우
1. "커스텀 위치 사용" 체크 확인
2. 위치 참조가 올바르게 설정되었는지 확인

## 📝 로그 메시지

- `[파티클재생] {이름} 재생 시작 (모드: {모드})`
- `[파티클재생] {이름} 정지`
- `[파티클재생] 원래 설정 복원 완료 ({모드})`

## 🔄 업데이트 내역

### v1.0.0
- 기본 파티클 재생 기능
- 3가지 재생 모드 지원
- 위치/스케일/회전 커스터마이징
- 애니메이션 감지 기능
- 에디터 UI 및 미리보기 기능 